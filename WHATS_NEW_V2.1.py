#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
显示最新更新信息 - v2.1
"""

print("""
╔════════════════════════════════════════════════════════════════╗
║                                                                ║
║       ✨ 脚本已更新 v2.1 - 最后一个文件推断功能             ║
║                                                                ║
╚════════════════════════════════════════════════════════════════╝

🎯 新增功能
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✨ 最后一个文件时间推断 (v2.1新增)

当一个视频是文件夹中的最后一个媒体文件时，
从前一个媒体文件（照片或视频）的时间加1分钟作为推断时间

示例：

  S7300358.JPG (EXIF: 14:59:00)  ←─┐
  S7300359.AVI (最后文件)           ├─ 推断
                                   └─ 15:00:00

特点：
  ✓ 自动检测最后一个文件
  ✓ 从前一个媒体文件推断时间
  ✓ 固定加1分钟增量
  ✓ 智能降级处理
  ✓ 完全向后兼容

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 日期识别优先级 (已更新)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

处理视频文件时的优先级顺序：

  1️⃣ 最后一个文件检测 ⭐⭐⭐ (v2.1新增)
     └─ 前一个媒体文件时间 + 1分钟
  
  2️⃣ EXIF插值 (v2.0)
     └─ 相邻照片EXIF时间线性插值
  
  3️⃣ 文件名解析
     └─ 文件名中的时间标记
  
  4️⃣ 文件序列推断
     └─ 基于编号的推断
  
  5️⃣ 目录名解析
     └─ 目录YYYYMMDD基础日期

自动降级：上级方法失败自动尝试下级方法

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 代码改动
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

main.py 中的改动：

新增方法：
  • _get_datetime_from_last_file() (70+行)
    └─ 检测最后文件并推断时间

改进方法：
  • guess_datetime_from_filename()
    └─ 添加最后文件检测优先级

改进的日志：
  • "（最后一个文件）从前一个文件推断时间: ..."

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📚 新增和更新文档
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

新增文档：
  • LAST_FILE_INFERENCE.md (300+行 - 功能详解)
  • UPDATE_V2.1.md (版本更新说明)

更新文档：
  • GUIDE.md (方法列表和日期识别系统)
  • README.md (功能列表和日期识别规则)
  • INDEX.md (文档导航)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 使用场景
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

完美适用于：
  📷 数码相机最后一段拍摄的视频
  📱 拍照→录视频的混合拍摄
  🎬 需要精确时间戳的视频处理
  🗂️ 连续序列号的媒体文件

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🚀 快速使用
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

立即处理：
  $ python3 main.py ./your_directory

查看详细说明：
  👉 阅读 LAST_FILE_INFERENCE.md
  👉 阅读 UPDATE_V2.1.md

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✨ 功能对比
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 方法 | 精度 | 版本 | 备注 |
|------|------|------|------|
| 最后文件推断 | ±1分钟 | v2.1 | 新增 ⭐ |
| EXIF插值 | ±1秒 | v2.0 | 线性插值 |
| EXIF直读 | ±1秒 | v1.0 | 直接读取 |
| 文件名解析 | ±1分钟 | v1.0 | 有时间标记 |
| 序列推断 | 估计值 | v1.0 | 备选方案 |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚙️ 默认行为
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

增量时间：1分钟（可自定义）
失败处理：自动降级到下一个方法
日志输出：详细的处理过程记录
兼容性：✓ 完全向后兼容

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

版本历程
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

v1.0 (初版)
  ✓ 基础的EXIF读取
  ✓ 简单的日期推断

v2.0 (2026-01-02)
  ✓ 添加EXIF插值功能
  ✓ 相邻照片时间推断

v2.1 (2026-01-02) ⭐
  ✓ 添加最后文件推断
  ✓ 更智能的日期识别

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

感谢使用！🎉

查看 LAST_FILE_INFERENCE.md 了解详细的功能说明。
""")
